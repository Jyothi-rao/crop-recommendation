import React, { useState } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Badge } from '@/components/ui/badge';
import { Separator } from '@/components/ui/separator';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Wheat, Users, Globe, Wifi, WifiOff, Lightbulb, Camera, IndianRupee, Leaf, Mic } from 'lucide-react';
import { LanguageProvider, LanguageSelector, useLanguage } from '../components/LanguageSelector';
import { CropRecommendationComponent } from '../components/CropRecommendation';
import { WeatherWidget } from '../components/WeatherWidget';
import { PlantDiseaseDetection } from '../components/PlantDiseaseDetection';
import { NaturalRemedies } from '../components/NaturalRemedies';
import { MarketPrices } from '../components/MarketPrices';
import { VoiceAssistant } from '../components/VoiceAssistant';
import { useOfflineStorage } from '../hooks/useOfflineStorage';
import { CropRecommendationEngine } from '../lib/cropRecommendationEngine';

const MainContent: React.FC = () => {
  const { t } = useLanguage();
  const { isOnline, storedRecommendations } = useOfflineStorage();
  const [selectedState, setSelectedState] = useState('Telangana');
  const [selectedCrop, setSelectedCrop] = useState('rice');
  const [activeTab, setActiveTab] = useState('recommendations');

  const seasonalTips = CropRecommendationEngine.getSeasonalTips('kharif', 'en');

  return (
    <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-50">
      {/* Header */}
      <header className="bg-white shadow-sm border-b">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="bg-green-600 p-2 rounded-lg">
                <Wheat className="h-6 w-6 text-white" />
              </div>
              <div>
                <h1 className="text-xl font-bold text-gray-900">{t('appTitle')}</h1>
                <p className="text-sm text-gray-600">Smart Agriculture for Indian Farmers</p>
              </div>
            </div>
            
            <div className="flex items-center gap-4">
              <div className="flex items-center gap-2">
                {isOnline ? (
                  <Wifi className="h-4 w-4 text-green-600" />
                ) : (
                  <WifiOff className="h-4 w-4 text-orange-600" />
                )}
                <span className="text-sm text-muted-foreground">
                  {isOnline ? 'Online' : 'Offline'}
                </span>
              </div>
              <LanguageSelector />
            </div>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {/* Welcome Section */}
        <div className="mb-8">
          <div className="text-center space-y-4">
            <h2 className="text-3xl font-bold text-gray-900">{t('welcome')}</h2>
            <p className="text-lg text-gray-600 max-w-3xl mx-auto">
              Get personalized crop recommendations, detect plant diseases with camera, find natural remedies, 
              and check market prices. Voice-enabled and available in Telugu, Hindi, and English.
            </p>
            
            <div className="flex flex-wrap justify-center gap-2 mt-4">
              <Badge variant="secondary" className="flex items-center gap-1">
                <Users className="h-3 w-3" />
                Farmer-Centric
              </Badge>
              <Badge variant="secondary" className="flex items-center gap-1">
                <Globe className="h-3 w-3" />
                Multi-Language
              </Badge>
              <Badge variant="secondary" className="flex items-center gap-1">
                <WifiOff className="h-3 w-3" />
                Offline Ready
              </Badge>
              <Badge variant="secondary" className="flex items-center gap-1">
                <Camera className="h-3 w-3" />
                Camera Capture
              </Badge>
              <Badge variant="secondary" className="flex items-center gap-1">
                <Mic className="h-3 w-3" />
                Voice Assistant
              </Badge>
              <Badge variant="secondary" className="flex items-center gap-1">
                <Leaf className="h-3 w-3" />
                Natural Remedies
              </Badge>
              <Badge variant="secondary" className="flex items-center gap-1">
                <IndianRupee className="h-3 w-3" />
                Market Prices
              </Badge>
            </div>
          </div>
        </div>

        {/* Main Tabs */}
        <Tabs value={activeTab} onValueChange={setActiveTab} className="space-y-6">
          <TabsList className="grid w-full grid-cols-2 lg:grid-cols-5">
            <TabsTrigger value="recommendations" className="flex items-center gap-2">
              <Wheat className="h-4 w-4" />
              <span className="hidden sm:inline">Crop Recommendations</span>
              <span className="sm:hidden">Crops</span>
            </TabsTrigger>
            <TabsTrigger value="disease-detection" className="flex items-center gap-2">
              <Camera className="h-4 w-4" />
              <span className="hidden sm:inline">Disease Detection</span>
              <span className="sm:hidden">Disease</span>
            </TabsTrigger>
            <TabsTrigger value="natural-remedies" className="flex items-center gap-2">
              <Leaf className="h-4 w-4" />
              <span className="hidden sm:inline">Natural Remedies</span>
              <span className="sm:hidden">Remedies</span>
            </TabsTrigger>
            <TabsTrigger value="market-prices" className="flex items-center gap-2">
              <IndianRupee className="h-4 w-4" />
              <span className="hidden sm:inline">Market Prices</span>
              <span className="sm:hidden">Prices</span>
            </TabsTrigger>
            <TabsTrigger value="weather" className="flex items-center gap-2">
              <Lightbulb className="h-4 w-4" />
              <span className="hidden sm:inline">Weather & Tips</span>
              <span className="sm:hidden">Weather</span>
            </TabsTrigger>
          </TabsList>

          {/* Crop Recommendations Tab */}
          <TabsContent value="recommendations">
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div className="lg:col-span-2">
                <CropRecommendationComponent />
                
                {/* Recent Recommendations */}
                {storedRecommendations.length > 0 && (
                  <Card className="mt-6">
                    <CardHeader>
                      <CardTitle>Recent Recommendations</CardTitle>
                    </CardHeader>
                    <CardContent>
                      <div className="space-y-3">
                        {storedRecommendations.slice(0, 3).map((rec) => (
                          <div key={rec.id} className="border rounded-lg p-3">
                            <div className="flex items-center justify-between mb-2">
                              <div className="text-sm font-medium">{rec.state}</div>
                              <div className="text-xs text-muted-foreground">
                                {new Date(rec.timestamp).toLocaleDateString()}
                              </div>
                            </div>
                            <div className="text-xs text-muted-foreground">
                              {rec.recommendations.length} crops recommended
                            </div>
                          </div>
                        ))}
                      </div>
                    </CardContent>
                  </Card>
                )}
              </div>

              <div className="space-y-6">
                <WeatherWidget state={selectedState} />
                
                {/* Voice Assistant Info */}
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center gap-2">
                      <Mic className="h-5 w-5 text-blue-500" />
                      Voice Assistant
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="text-sm text-muted-foreground">
                      Use voice commands to navigate the app. Click the microphone button in the bottom-right corner.
                    </div>
                    <div className="space-y-2 text-xs">
                      <div className="font-medium">Try saying:</div>
                      <div className="text-muted-foreground">"Crop recommendation"</div>
                      <div className="text-muted-foreground">"Disease detection"</div>
                      <div className="text-muted-foreground">"Market prices"</div>
                      <div className="text-muted-foreground">"Capture photo"</div>
                    </div>
                  </CardContent>
                </Card>

                {/* Quick Features */}
                <Card>
                  <CardHeader>
                    <CardTitle>Key Features</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="flex items-start gap-3">
                      <div className="bg-green-100 p-1 rounded">
                        <Wheat className="h-4 w-4 text-green-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">AI-Powered Recommendations</div>
                        <div className="text-muted-foreground">Based on soil, weather, and regional data</div>
                      </div>
                    </div>
                    
                    <div className="flex items-start gap-3">
                      <div className="bg-blue-100 p-1 rounded">
                        <Camera className="h-4 w-4 text-blue-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">Camera Disease Detection</div>
                        <div className="text-muted-foreground">Capture photos for instant plant analysis</div>
                      </div>
                    </div>
                    
                    <div className="flex items-start gap-3">
                      <div className="bg-purple-100 p-1 rounded">
                        <Mic className="h-4 w-4 text-purple-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">Voice Control</div>
                        <div className="text-muted-foreground">Navigate using voice commands</div>
                      </div>
                    </div>
                    
                    <div className="flex items-start gap-3">
                      <div className="bg-orange-100 p-1 rounded">
                        <WifiOff className="h-4 w-4 text-orange-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">Offline Functionality</div>
                        <div className="text-muted-foreground">Works without internet connection</div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </div>
          </TabsContent>

          {/* Disease Detection Tab */}
          <TabsContent value="disease-detection">
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div className="lg:col-span-2">
                <PlantDiseaseDetection />
              </div>
              <div className="space-y-6">
                <WeatherWidget state={selectedState} />
                
                <Card>
                  <CardHeader>
                    <CardTitle>How It Works</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="flex items-start gap-3">
                      <div className="bg-blue-100 p-1 rounded">
                        <Camera className="h-4 w-4 text-blue-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">1. Capture or Upload</div>
                        <div className="text-muted-foreground">Use camera to capture or upload existing photo</div>
                      </div>
                    </div>
                    
                    <div className="flex items-start gap-3">
                      <div className="bg-green-100 p-1 rounded">
                        <Lightbulb className="h-4 w-4 text-green-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">2. AI Analysis</div>
                        <div className="text-muted-foreground">Our AI identifies diseases and pests</div>
                      </div>
                    </div>
                    
                    <div className="flex items-start gap-3">
                      <div className="bg-purple-100 p-1 rounded">
                        <Leaf className="h-4 w-4 text-purple-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">3. Get Solutions</div>
                        <div className="text-muted-foreground">Receive treatment recommendations and pesticide links</div>
                      </div>
                    </div>

                    <div className="flex items-start gap-3">
                      <div className="bg-red-100 p-1 rounded">
                        <Mic className="h-4 w-4 text-red-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">4. Voice Commands</div>
                        <div className="text-muted-foreground">Say "capture photo" to take pictures hands-free</div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </div>
          </TabsContent>

          {/* Natural Remedies Tab */}
          <TabsContent value="natural-remedies">
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div className="lg:col-span-2">
                <NaturalRemedies cropId={selectedCrop} />
              </div>
              <div className="space-y-6">
                <Card>
                  <CardHeader>
                    <CardTitle>Select Crop for Remedies</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="grid gap-2">
                      {['rice', 'wheat', 'cotton', 'maize', 'sugarcane'].map((crop) => (
                        <button
                          key={crop}
                          onClick={() => setSelectedCrop(crop)}
                          className={`p-3 text-left rounded-lg border transition-colors ${
                            selectedCrop === crop
                              ? 'border-green-500 bg-green-50'
                              : 'border-gray-200 hover:border-green-300'
                          }`}
                        >
                          <div className="font-medium capitalize">{crop}</div>
                        </button>
                      ))}
                    </div>
                  </CardContent>
                </Card>

                <Card>
                  <CardHeader>
                    <CardTitle>Benefits of Natural Remedies</CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-3">
                    <div className="flex items-start gap-3">
                      <div className="bg-green-100 p-1 rounded">
                        <Leaf className="h-4 w-4 text-green-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">Eco-Friendly</div>
                        <div className="text-muted-foreground">Safe for environment and beneficial insects</div>
                      </div>
                    </div>
                    
                    <div className="flex items-start gap-3">
                      <div className="bg-blue-100 p-1 rounded">
                        <IndianRupee className="h-4 w-4 text-blue-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">Cost-Effective</div>
                        <div className="text-muted-foreground">Made from easily available ingredients</div>
                      </div>
                    </div>
                    
                    <div className="flex items-start gap-3">
                      <div className="bg-purple-100 p-1 rounded">
                        <Users className="h-4 w-4 text-purple-600" />
                      </div>
                      <div className="text-sm">
                        <div className="font-medium">Safe for Farmers</div>
                        <div className="text-muted-foreground">No harmful chemical exposure</div>
                      </div>
                    </div>
                  </CardContent>
                </Card>
              </div>
            </div>
          </TabsContent>

          {/* Market Prices Tab */}
          <TabsContent value="market-prices">
            <MarketPrices />
          </TabsContent>

          {/* Weather & Tips Tab */}
          <TabsContent value="weather">
            <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
              <div className="lg:col-span-2 space-y-6">
                <WeatherWidget state={selectedState} />
                
                {/* Farming Tips */}
                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center gap-2">
                      <Lightbulb className="h-5 w-5 text-yellow-500" />
                      {t('tips')}
                    </CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="space-y-3">
                      {seasonalTips.map((tip, index) => (
                        <div key={index} className="text-sm p-3 bg-yellow-50 rounded-lg border-l-4 border-yellow-400">
                          {tip}
                        </div>
                      ))}
                    </div>
                    
                    <Separator className="my-4" />
                    
                    <div className="text-sm p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
                      {t('soilTesting')}
                    </div>
                  </CardContent>
                </Card>
              </div>

              <div className="space-y-6">
                <Card>
                  <CardHeader>
                    <CardTitle>Select State for Weather</CardTitle>
                  </CardHeader>
                  <CardContent>
                    <div className="grid gap-2 max-h-64 overflow-y-auto">
                      {['Telangana', 'Andhra Pradesh', 'Karnataka', 'Tamil Nadu', 'Maharashtra', 'Gujarat', 'Punjab', 'Haryana'].map((state) => (
                        <button
                          key={state}
                          onClick={() => setSelectedState(state)}
                          className={`p-2 text-left rounded border transition-colors ${
                            selectedState === state
                              ? 'border-blue-500 bg-blue-50'
                              : 'border-gray-200 hover:border-blue-300'
                          }`}
                        >
                          <div className="text-sm font-medium">{state}</div>
                        </button>
                      ))}
                    </div>
                  </CardContent>
                </Card>
              </div>
            </div>
          </TabsContent>
        </Tabs>
      </main>

      {/* Voice Assistant */}
      <VoiceAssistant
        onSwitchTab={setActiveTab}
        onCropRecommendation={() => setActiveTab('recommendations')}
        onDiseaseDetection={() => setActiveTab('disease-detection')}
        onNaturalRemedies={() => setActiveTab('natural-remedies')}
        onMarketPrices={() => setActiveTab('market-prices')}
        onWeather={() => setActiveTab('weather')}
      />

      {/* Footer */}
      <footer className="bg-white border-t mt-16">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div className="text-center text-sm text-gray-600">
            <p>AI-Based Crop Recommendation System for Indian Farmers</p>
            <p className="mt-2">Built for SIH25030 - Lightweight, Offline-Ready, and Government Scalable</p>
            <p className="mt-2">Features: Crop Recommendations • Camera Disease Detection • Voice Assistant • Natural Remedies • Market Prices</p>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default function Index() {
  return (
    <LanguageProvider>
      <MainContent />
    </LanguageProvider>
  );
}
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.2 47.4% 11.2%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 40% 96.1%;
    --secondary-foreground: 222.2 47.4% 11.2%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;
    --ring: 222.2 84% 4.9%;

    --radius: 0.5rem;

    --sidebar-background: 0 0% 98%;

    --sidebar-foreground: 240 5.3% 26.1%;

    --sidebar-primary: 240 5.9% 10%;

    --sidebar-primary-foreground: 0 0% 98%;

    --sidebar-accent: 240 4.8% 95.9%;

    --sidebar-accent-foreground: 240 5.9% 10%;

    --sidebar-border: 220 13% 91%;

    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.2 47.4% 11.2%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 217.2 32.6% 17.5%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;
    --ring: 212.7 26.8% 83.9%;
    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}
import { createRoot } from 'react-dom/client';
import App from './App.tsx';
import './index.css';

createRoot(document.getElementById('root')!).render(<App />);
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="https://public-frontend-cos.metadl.com/mgx/img/favicon.png" type="image/png">
  <title>AI Crop Recommendation - Smart Agriculture for Indian Farmers</title>
  <meta name="description" content="AI-based crop recommendation system for Indian farmers. Get personalized suggestions based on soil type, weather, and irrigation. Available in Telugu, Hindi, and English." />
  <meta name="author" content="MGX" />
  <meta name="keywords" content="agriculture, farming, crop recommendation, AI, India, Telugu, Hindi, soil, irrigation" />

  <meta property="og:title" content="AI Crop Recommendation - Smart Agriculture for Indian Farmers" />
  <meta property="og:description" content="AI-based crop recommendation system for Indian farmers. Get personalized suggestions based on soil type, weather, and irrigation." />
  <meta property="og:type" content="website" />

</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "default",
  "rsc": false,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/index.css",
    "baseColor": "slate",
    "cssVariables": true,
    "prefix": ""
  },
  "aliases": {
    "components": "@/components",
    "utils": "@/lib/utils",
    "ui": "@/components/ui",
    "lib": "@/lib",
    "hooks": "@/hooks"
  }
}
import { Toaster } from '@/components/ui/sonner';
import { TooltipProvider } from '@/components/ui/tooltip';
import { QueryClient, QueryClientProvider } from '@tanstack/react-query';
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import Index from './pages/Index';
import NotFound from './pages/NotFound';

const queryClient = new QueryClient();

const App = () => (
  <QueryClientProvider client={queryClient}>
    <TooltipProvider>
      <Toaster />
      <BrowserRouter>
        <Routes>
          <Route path="/" element={<Index />} />
          <Route path="*" element={<NotFound />} />
        </Routes>
      </BrowserRouter>
    </TooltipProvider>
  </QueryClientProvider>
);

export default App;
import { Button } from '@/components/ui/button';

export default function NotFoundPage() {
  return (
    <div className="min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-gray-50 to-blue-50 p-6 text-center">
      <div className="space-y-6 max-w-md">
        <div className="space-y-3">
          <h1 className="text-8xl font-bold text-blue-600">404</h1>
          <h2 className="text-2xl font-semibold text-gray-800">Page Not Found</h2>
          <p className="text-muted-foreground">The page you're looking for doesn't exist or may have been moved.</p>
        </div>

        <div className="flex flex-col sm:flex-row gap-3 justify-center">
          <Button asChild>
            <a href="/">Return Home</a>
          </Button>
          <Button variant="outline" onClick={() => window.history.back()}>
            Go Back
          </Button>
        </div>
      </div>
    </div>
  );
}

